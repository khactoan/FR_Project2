<div class="col-md-6">
 <div class="well profile">
    <div class="col-sm-12">
      <div class="col-xs-12 col-sm-8">
          <h2><%= @user.name %></h2>
          <p><strong><%= t ".Email" %>: </strong> <%= @user.email %></p>
          <% if !@user.date_of_birth.nil? %>
            <p><strong><%= t ".Birthday" %>: </strong>
              <%= @user.date_of_birth.strftime("%d.%m.%Y") %>
            </p>
          <% end %>
      </div>
      <div class="col-xs-12 col-sm-4 text-center">
        <%= image_tag @user.avatar.url(:thumb), class: "max-size-avatar" %>
      </div>
    </div>
    <div class="col-xs-12 divider text-center">
        <div class="col-xs-12 col-sm-4 emphasis">
          <h2><strong><%= @user.followers.count %></strong></h2>
          <p><small>Followers</small></p>
        </div>
      <div class="col-xs-12 col-sm-4 emphasis">
        <h2><strong><%= @user.following.count %></strong></h2>
        <p><small>Following</small></p>
        <% if user_signed_in? %>
          <% if current_user == @user %>
            <%= link_to edit_user_registration_path,
              class: "btn btn-info btn-block" do %>
              <span class="fa fa-user"></span> <%= t "Edit" %>
            <% end %>
          <% else %>
            <% if current_user.following? @user %>
              <%= form_for current_user.active_relationships
                .find_by(followed_id: @user.id),
                html: {method: :delete} do |f| %>
              <%= f.submit "Unfollow", class: "btn" %>
            <% end %>
            <% else %>
              <%= form_for current_user.active_relationships.build do |f| %>
                <div><%= hidden_field_tag :followed_id, @user.id %></div>
                <%= f.submit "Follow", class: "btn btn-primary" %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      </div>
      <div class="col-xs-12 col-sm-4 emphasis">
        <h2><strong><%= @user.posts.count %></strong></h2>
        <p><small><%= t "Posts" %></small></p>
      </div>
    </div>
 </div>
</div>

<div class="col-md-6">
<h2><%= t ".Others user" %></h2>
  <div class="table-responsive">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th><%= t "Name"  %></th>
          <th><%= t "Email"  %></th>
          <th><%= t "Birth day"  %></th>
          <th><%= t "Posts"  %></th>
          <% if user_signed_in? %>
            <th></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% @users.each_with_index do |user, index| %>
          <tr>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td>
              <% if !user.date_of_birth.nil? %>
                <%= user.date_of_birth.strftime "%d-%m-%Y" %>
              <% end %>
            </td>
            <td>
              <%= link_to user.posts.size, user_posts_path(user) %>
            </td>
            <% if user_signed_in? %>
              <td>
                <% if current_user.following? user %>
                  <%= form_for current_user.active_relationships
                    .find_by(followed_id: user.id),
                    html: {method: :delete} do |f| %>
                  <%= f.submit "Unfollow", class: "btn" %>
                <% end %>
                <% else %>
                  <%= form_for current_user.active_relationships.build do |f| %>
                    <div><%= hidden_field_tag :followed_id, user.id %></div>
                    <%= f.submit "Follow", class: "btn btn-primary" %>
                  <% end %>
                 <% end %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <%= will_paginate @users %>
</div>
